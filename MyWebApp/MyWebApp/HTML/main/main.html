<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>main</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link rel="stylesheet" href="../../css/mui.min.css">
		
	</head>

	<body>
		
		<header class="mui-bar mui-bar-nav">
		    <a class="mui-pull-left"></a>
		    <h1 class="mui-title">固定资产管理系统</h1>
		</header>
		
		<div class="mui-content">
			<ul class="mui-table-view mui-grid-view mui-grid-9">
		        <li style="display: none;" class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3" id="manage">
		        	<a href="#">
		    			<span class="mui-icon mui-icon-paperclip"></span>
		 				<div class="mui-media-body">管理</div></a></li>
		        <li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3" id="check">
		        	<a href="#">
		           		<span class="mui-icon mui-icon-compose"></span>
		           		<div class="mui-media-body">盘点</div></a></li>
		        <li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3" id="repair">
		        	<a href="#">
		        		<span class="mui-icon mui-icon-loop"></span>
		           		<div class="mui-media-body">报修</div></a></li>
		        <li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3" id="query">
		        	<a href="#">
		           		<span class="mui-icon mui-icon-search"></span>
		           		<div class="mui-media-body">查询</div></a></li>
		        <li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3" id="setting">
		        	<a href="#">
		           		<span class="mui-icon mui-icon-gear"></span>
		           		<div class="mui-media-body">设置</div></a></li>
		    </ul> 
		</div>
		
		<script src="../../js/mui.min.js"></script>
		<script src="../../js/app.js"></script>
		<script>
			(function($, doc) {
				$.init();
//				var settings = app.getSettings();
//				var account = doc.getElementById('account');
//				//
//				window.addEventListener('show', function() {
//					var state = app.getState();
//					account.innerText = state.account;
//				}, false);
				
				$.plusReady(function() {
					var settingPage = $.preload({
						"id": 'setting',
						"url": '../../setting.html'
					});
					
					var managePage =  $.preload({
						"id": 'manage',
						"url": 'manage.html'
					});
					
					var repairPage =  $.preload({
						"id": 'repair',
						"url": 'repair.html'
					});
					
					var checkPage =  $.preload({
						"id": 'check',
						"url": 'check.html'
					});
					
					var queryPage =  $.preload({
						"id": 'query',
						"url": 'query.html'
					});
					
					var settingButton = doc.getElementById('setting');
					var manageButton = doc.getElementById('manage');
					var repairButton = doc.getElementById('repair');
					var checkButton = doc.getElementById('check');
					var queryButton = doc.getElementById('query');
					
					settingButton.addEventListener('tap', function(event) {
						$.openWindow({
							id: 'setting',
							show: {
								aniShow: 'pop-in'
							},
							styles: {
								popGesture: 'hide'
							},
							waiting: {
								autoShow: false
							}
						});
					});
					
					manageButton.addEventListener('tap', function(event) {
						$.openWindow({
							id: 'manage',
							show: {
								aniShow: 'pop-in'
							},
							styles: {
								popGesture: 'hide'
							},
							waiting: {
								autoShow: false
							}
						});
					});
					
					repairButton.addEventListener('tap', function(event) {
						$.openWindow({
							id: 'repair',
							show: {
								aniShow: 'pop-in'
							},
							styles: {
								popGesture: 'hide'
							},
							waiting: {
								autoShow: false
							}
						});
					});
					
					checkButton.addEventListener('tap', function(event) {
						$.openWindow({
							id: 'check',
							show: {
								aniShow: 'pop-in'
							},
							styles: {
								popGesture: 'hide'
							},
							waiting: {
								autoShow: false
							}
						});
					});
					
					queryButton.addEventListener('tap', function(event) {
						$.openWindow({
							id: 'query',
							show: {
								aniShow: 'pop-in'
							},
							styles: {
								popGesture: 'hide'
							},
							waiting: {
								autoShow: false
							}
						});
					});
					
					//后退
					$.oldBack = mui.back;
					var backButtonPress = 0;
					$.back = function(event) {
						backButtonPress++;
						if (backButtonPress > 1) {
							plus.runtime.quit();
						} else {
							plus.nativeUI.toast('再按一次退出应用');
						}
						setTimeout(function() {
							backButtonPress = 0;
						}, 1000);
						return false;
					};
					
				});
					
			}(mui, document));
		</script>
	</body>

</html>